# Игра «Сапёр»
Версия 1.1

Автор: Самунь Виктор (victor.samun@gmail.com)

Ревью выполнили: [Азовсков Сергей] (https://github.com/last-g), [Берсенёв Александр] (https://github.com/alexbers)


## Описание
Данное приложение является реализацией игры «Сапёр» и может быть использовано
как по прямому назначению, так и в качестве reference solution.


## Требования
* Python версии не ниже 3.6
* PyQt версии 5 с установленным QtWebKit (для *nix-систем нужно устанавливать
  отдельно) для запуска графической версии


## Состав
* Консольная версия: `cmines.py`
* Графическая версия: `mines.py`
* Файл настроек: `settings.ini`
* Модули: `minesweeper/`
* Изображения: `pictures/`
* Тесты: `tests/`


## Консольная версия
Справка по запуску: `./cmines.py --help`

Пример запуска: `./cmines.py -i`

Справка по командам: `help [команда]`

### Управление

* `show` — показать поле
* `flag x y` — поставить флажок на (x,y)
* `open x y` — открыть клетку (x,y)
* `new` — начать новую игру

## Графическая версия
Справка по запуску: `./mines.py --help`

Пример запуска: `./mines.py`

### Управление

* ЛКМ — открыть клетку
* ПКМ — поставить флажок на клетку
* `Ctrl-N` — начать новую игру


## Подробности реализации
Модули, отвечающие за логику игры, расположены в пакете minesweeper.
В основе всего лежат класс `game.Field`, реализующий хранение игрового поля и
класс `game.GameState`, реализующий хранение и изменение состояния игрового поля.
Класс `driver.Minesweeper` («драйвер») позволяет создавать игры и управлять
игровыми состояниями, в т.ч. поддерживается undo/redo. Обо всех изменениях
«драйвер» сообщает посредством событий, на которые можно подписываться.
За работу скорборда отвечает класс `driver.Scoreboard`.

На данные модули (`game`, `driver`) написаны тесты, их можно найти в `tests/`.
Покрытие по строкам составляет около 99%:

    minesweeper/driver       320      6    98%   218, 222-224, 234-235, 440
    minesweeper/game         173      0   100%   

Приложение поддерживает отладочный режим, в логах можно видеть всю необходимую
информацию о работе приложения, возникающих ошибках и используемых стратегиях
восстановления. Более подробно о запуске отладочного режима см. справку.

